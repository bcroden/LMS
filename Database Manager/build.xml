<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!-- Auto generated by Eclipse on 2/28/15. Trimmed by Alex -->

<project basedir="." default="build-source" name="DatabaseManager">
    
	<!-- Get access to JAVA_HOME etc -->
	<property environment="env"/>
    	
	<!-- Java versions for source code and binaries -->
    <property name="target" value="1.7"/>
    <property name="source" value="1.7"/>
	
	<!-- Key directories -->
	<property name="src.dir" value="src/main/java"/>
	<property name="bin.dir" value="bin"/>
	<property name="lib.dir" value="lib"/>
	<property name="test.dir" value="src/test/java"/>
	
	<!-- Binary files for executing application  -->
    <path id="DatabaseManager.classpath">
        <pathelement location="${bin.dir}"/>
    </path>
	
	<!-- Location of jar files for various libraries -->
	<path id="JUnit.classpath">
		<pathelement location="${lib.dir}/junit/junit-4.12.jar"/>
		<pathelement location="${lib.dir}/junit/hamcrest-core-1.3.jar"/>
	</path>
	
	<path id="MySQL.classpath">
		<pathelement location="${lib.dir}/mysql-connector-java-5.0.8-bin.jar"/>
	</path>

	<path id="JSON.classpath">
		<pathelement location="${lib.dir}/json-20141113.jar"/>
	</path>
    
	<!-- Delete all non-source files -->
	<target name="clean">
        <delete dir="${bin.dir}"/>
    </target>

	<!-- Setup needed directories and copy necessary files -->
	<target name="init" depends="clean">
        <mkdir dir="${bin.dir}"/>
        <copy includeemptydirs="false" todir="${bin.dir}">
            <fileset dir="${src.dir}">
                <exclude name="**/*.launch"/>
                <exclude name="**/*.java"/>
            </fileset>
        </copy>
    </target>
        
	<!-- Compile all source files -->
	<target depends="init" name="build-source">
        <javac destdir="${bin.dir}" includeantruntime="false" source="${source}" target="${target}" fork="true">
            <src path="${src.dir}"/>
            <classpath>
				<path refid="DatabaseManager.classpath"/>
				<path refid="MySQL.classpath"/>
				<path refid="JSON.classpath"/>
			</classpath>
        </javac>
    </target>
	
	<!-- Compile all tests -->
	<target name="build-tests" depends="build-source">
		<javac srcdir="${test.dir}" destdir="${bin.dir}" includeantruntime="false" source="${source}" target="${target}" fork="true">
			<classpath>
				<pathelement location="${bin.dir}"/>
				<path refid="JUnit.classpath"/>
			</classpath>
		</javac>
	</target>
    
	<!-- Execute all tests -->
	<target name="exec-tests" depends="build-tests">
		<junit fork="yes" dir="${bin.dir}" printsummary="yes">
			<classpath>
				<pathelement location="${bin.dir}"/>
				<path refid="JUnit.classpath"/>
			</classpath>
			
			<!-- Execute all tests which end with *TEST.java that are in the test directory -->
			<batchtest>
				<fileset dir="${test.dir}" includes="**/*TEST.java"/>
			</batchtest>
		</junit>
	</target>
	
	<!-- Execute Database Manager application -->
	<target name="Main" depends="build-source">
        <java classname="com.team1.Main" failonerror="true" fork="yes">
            <classpath>
				<path refid="DatabaseManager.classpath"/>
				<path refid="MySQL.classpath"/>
				<path refid="JSON.classpath"/>
			</classpath>
        </java>
    </target>

    <target name="BuildDB" depends="build-source">
         <java classname="com.team1.db.BuildDB" failonerror="true" fork="yes">
             <classpath>
                 <path refid="DatabaseManager.classpath"/>
                 <path refid="MySQL.classpath"/>
                 <path refid="JSON.classpath"/>
             </classpath>
         </java>
    </target>
	
</project>
